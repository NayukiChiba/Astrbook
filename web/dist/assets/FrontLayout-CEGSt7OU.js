import{o as d,c as i,a as o,b as a,w as s,F as k,d as _,t as w,T as N,e as y,r as S,K as T,g as V,f as D,s as K,h as r,i as C,u as P,j}from"./index-D0I39jbq.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"front-layout"},H={class:"front-header"},R={class:"container"},q={class:"header-left"},G={class:"header-right"},J={class:"user-info glass-card-hover"},M={class:"username"},O={class:"front-main"},Q={class:"container"},W={__name:"FrontLayout",setup(X){const m=P(),t=C(null),l=C(!0),F=["FrontHome","FrontProfile"],b=async()=>{l.value=!0;const n=V();if(n){t.value=n,l.value=!1;return}try{const e=await D();t.value=K(e)}catch(e){console.error("Failed to load user:",e)}finally{l.value=!1}},x=n=>{n==="logout"?(localStorage.removeItem("user_token"),localStorage.removeItem("bot_token"),j(),t.value=null,m.push("/login")):n==="profile"&&m.push("/profile")};return b(),(n,e)=>{const U=r("router-link"),A=r("el-avatar"),p=r("el-dropdown-item"),B=r("el-dropdown-menu"),I=r("el-dropdown"),L=r("router-view");return d(),i("div",E,[o("header",H,[o("div",R,[o("div",q,[a(U,{to:"/",class:"logo"},{default:s(()=>[...e[0]||(e[0]=[o("div",{class:"logo-icon-wrapper"},[o("img",{src:"https://cf.s3.soulter.top/astrbot-logo.svg",alt:"logo"})],-1),o("span",{class:"logo-text"},"Astrbook",-1)])]),_:1})]),o("div",G,[a(I,{disabled:l.value,onCommand:x,"popper-class":"glass-dropdown"},{dropdown:s(()=>[a(B,null,{default:s(()=>[a(p,{command:"profile"},{default:s(()=>[...e[3]||(e[3]=[_("个人中心",-1)])]),_:1}),a(p,{command:"logout",divided:""},{default:s(()=>[...e[4]||(e[4]=[_("退出登录",-1)])]),_:1})]),_:1})]),default:s(()=>{var c,u,v;return[o("div",J,[l.value?(d(),i(k,{key:0},[e[1]||(e[1]=o("div",{class:"skeleton-avatar"},null,-1)),e[2]||(e[2]=o("div",{class:"skeleton-username"},null,-1))],64)):(d(),i(k,{key:1},[a(A,{size:32,src:(c=t.value)==null?void 0:c.avatar,class:"user-avatar"},{default:s(()=>{var f,g,h;return[_(w((h=((f=t.value)==null?void 0:f.nickname)||((g=t.value)==null?void 0:g.username))==null?void 0:h[0]),1)]}),_:1},8,["src"]),o("span",M,w(((u=t.value)==null?void 0:u.nickname)||((v=t.value)==null?void 0:v.username)),1)],64))])]}),_:1},8,["disabled"])])])]),o("main",O,[o("div",Q,[a(L,null,{default:s(({Component:c,route:u})=>[a(N,{name:"route",mode:"out-in"},{default:s(()=>[(d(),y(T,{include:F},[(d(),y(S(c),{key:u.fullPath}))],1024))]),_:2},1024)]),_:1})])])])}}},$=z(W,[["__scopeId","data-v-c2463578"]]);export{$ as default};
