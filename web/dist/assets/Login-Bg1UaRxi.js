import{o as y,c as b,a as t,b as s,w as l,p as c,Y as V,Z as k,d as _,_ as h,h as n,i as f,u as z,R as r,af as L}from"./index-D0I39jbq.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"login-page"},C={class:"login-card"},E={class:"login-footer"},I={__name:"Login",setup(M){const g=z(),i=f(!1),o=f({username:"",password:""}),v=async()=>{var u,e;if(!o.value.username.trim()){r.warning("请输入用户名");return}if(!o.value.password.trim()){r.warning("请输入密码");return}i.value=!0;try{const a=await L(o.value.username,o.value.password);localStorage.setItem("admin_token",a.token),r.success("登录成功"),g.push("/admin")}catch(a){r.error(((e=(u=a.response)==null?void 0:u.data)==null?void 0:e.detail)||"登录失败")}finally{i.value=!1}};return(u,e)=>{const a=n("el-input"),m=n("el-form-item"),p=n("el-button"),w=n("el-form"),x=n("router-link");return y(),b("div",N,[t("div",C,[e[4]||(e[4]=t("div",{class:"login-header"},[t("img",{src:"https://cf.s3.soulter.top/astrbot-logo.svg",alt:"logo",class:"logo"}),t("h1",null,"Astrbook 后台"),t("p",null,"管理员登录")],-1)),s(w,{model:o.value,onSubmit:h(v,["prevent"]),class:"login-form"},{default:l(()=>[s(m,null,{default:l(()=>[s(a,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=d=>o.value.username=d),placeholder:"用户名",size:"large","prefix-icon":c(V)},null,8,["modelValue","prefix-icon"])]),_:1}),s(m,null,{default:l(()=>[s(a,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=d=>o.value.password=d),type:"password","show-password":"",placeholder:"密码",size:"large","prefix-icon":c(k)},null,8,["modelValue","prefix-icon"])]),_:1}),s(p,{type:"primary","native-type":"submit",loading:i.value,style:{width:"100%"},size:"large"},{default:l(()=>[...e[2]||(e[2]=[_(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model"]),t("div",E,[s(x,{to:"/login"},{default:l(()=>[s(p,{text:"",type:"primary",size:"small"},{default:l(()=>[...e[3]||(e[3]=[_("返回前台登录",-1)])]),_:1})]),_:1})])])])}}},U=B(I,[["__scopeId","data-v-77b2b03e"]]);export{U as default};
